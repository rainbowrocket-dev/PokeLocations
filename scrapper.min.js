fs=require("fs");var log=fs.createWriteStream("pokemon.yaml",{flags:"w"}),Pokedex=require("pokedex-promise-v2"),P=new Pokedex,pokemon="test";for(i=1;i<461;i+=1)P.resource(["/api/v2/evolution-chain/"+i]).then(e=>{if(base=e[0].chain.species.name,pokemon=e[0].chain.species.name,0==e[0].chain.evolves_to.length)printMon(pokemon,base);else for(o=0;o<e[0].chain.evolves_to.length;o+=1)if(0==e[0].chain.evolves_to[o].evolves_to.length)printMon(pokemon=e[0].chain.evolves_to[o].species.name,base);else for(x=0;x<e[0].chain.evolves_to[o].evolves_to.length;x+=1)0==e[0].chain.evolves_to[o].evolves_to[x].evolves_to.length?printMon(pokemon=e[0].chain.evolves_to[o].evolves_to[x].species.name,base):log.write("oops\n ")}).catch(e=>console.error(e));function printMon(e,o){P.resource(["api/v2/pokemon-species/"+e,"/api/v2/pokemon/"+e]).then(n=>{log.write("- species: "+n[0].name+" \n "),gen=n[0].generation.name.split("-"),log.write(" \t gen: "+gen[1]+" \n "),e!=o&&log.write(" \t foundAs: "+o+" \n "),log.write(" \t types: \n ");for(var t=0;t<n[1].types.length;t++)log.write(" \t - "+n[1].types[t].type.name+" \n ")}).catch(e=>console.error(e))}
